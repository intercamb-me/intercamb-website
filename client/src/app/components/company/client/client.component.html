<div *ngIf="!loading" id="client">
  <div class="basic-info">
    <img class="photo" [src]="client.photo_url">
    <div class="info">
      <h1>{{ client.forename }} {{ client.surname }}</h1>
      <h4 class="mb-2 text-secondary">{{ client.email }}</h4>
      <h4 class="mb-0 text-secondary">{{ client.phone }}</h4>
    </div>
  </div>
  <div class="row">
    <div class="col-12 text-right">
      <a [routerLink]="['edit']" class="btn btn-primary">Editar dados</a>
    </div>
  </div>
  <div class="row mt-4">
    <div class="col-12">
      <ng-container *ngIf="clientInfoIndex === 0">
        <div class="d-flex">
          <div class="flex-grow-1">
            <h2>Dados pessoais</h2>
          </div>
          <div class="flex-grow-0">
            <button type="button" class="btn btn-primary mr-2" disabled>Anterior</button>
            <button (click)="nextClientInfo()" type="button" class="btn btn-primary">Próximo</button>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col form-group">
                <label>Nacionalidade</label>
                <p class="mb-0">{{ client.personal_data.nationality | hyphensIfEmpty }}</p>
              </div>
              <div class="col form-group">
                <label>Naturalidade</label>
                <p class="mb-0">
                  <span *ngIf="hasPlaceOfBirth()">
                    {{ client.personal_data.place_of_birth.city }} - {{ client.personal_data.place_of_birth.state }}
                  </span>
                  <span *ngIf="!hasPlaceOfBirth()">
                    {{ "" | hyphensIfEmpty }}
                  </span>
                </p>
              </div>
              <div class="col form-group">
                <label>RG</label>
                <p class="mb-0">
                  <span *ngIf="hasIdentityDocument()">
                    {{ client.personal_data.identity_document.number }} - {{ client.personal_data.identity_document.issuing_authority }} {{ client.personal_data.identity_document.state }}
                  </span>
                  <span *ngIf="!hasIdentityDocument()">
                    {{ "" | hyphensIfEmpty }}
                  </span>
                </p>
              </div>
            </div>
            <div class="row">
              <div class="col form-group">
                <label>CPF</label>
                <p class="mb-0">{{ client.personal_data.cpf_number | hyphensIfEmpty }}</p>
              </div>
              <div class="col form-group">
                <label>Passaporte</label>
                <p class="mb-0">{{ client.personal_data.passport_number | hyphensIfEmpty }}</p>
              </div>
              <div class="col form-group">
                <label>Data de nascimento</label>
                <p class="mb-0">{{ (client.personal_data.birthdate | date:"dd/MM/yyyy") || "" | hyphensIfEmpty }}</p>
              </div>
            </div>
            <div class="row">
              <div class="col-4 form-group mb-0">
                <label>Sexo</label>
                <p class="mb-0">{{ client.personal_data.gender | hyphensIfEmpty }}</p>
              </div>
              <div class="col-4 form-group mb-0">
                <label>Estado Civil</label>
                <p class="mb-0">{{ client.personal_data.marital_status | hyphensIfEmpty }}</p>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="clientInfoIndex === 1">
        <div class="d-flex">
          <div class="flex-grow-1">
            <h2>Endereço</h2>
          </div>
          <div class="flex-grow-0">
            <button (click)="previousClientInfo()" type="button" class="btn btn-primary mr-2">Anterior</button>
            <button (click)="nextClientInfo()" type="button" class="btn btn-primary">Próximo</button>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col form-group">
                <label>Logradouro</label>
                <p class="mb-0">{{ client.address.public_place | hyphensIfEmpty }}</p>
              </div>
              <div class="col form-group">
                <label>Número</label>
                <p class="mb-0">{{ client.address.number | hyphensIfEmpty }}</p>
              </div>
              <div class="col form-group">
                <label>Complemento</label>
                <p class="mb-0">{{ client.address.complement | hyphensIfEmpty }}</p>
              </div>
            </div>
            <div class="row">
              <div class="col form-group">
                <label>Bairro</label>
                <p class="mb-0">{{ client.address.neighborhood | hyphensIfEmpty }}</p>
              </div>
              <div class="col form-group">
                <label>Cidade</label>
                <p class="mb-0">{{ client.address.city | hyphensIfEmpty }}</p>
              </div>
              <div class="col form-group">
                <label>Estado</label>
                <p class="mb-0">{{ client.address.state | hyphensIfEmpty }}</p>
              </div>
            </div>
            <div class="row">
              <div class="col form-group mb-0">
                <label>CEP</label>
                <p class="mb-0">{{ client.address.zip_code | hyphensIfEmpty }}</p>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="clientInfoIndex === 2">
        <div class="d-flex">
          <div class="flex-grow-1">
            <h2>Dados familiares</h2>
          </div>
          <div class="flex-grow-0">
            <button (click)="previousClientInfo()" type="button" class="btn btn-primary mr-2">Anterior</button>
            <button (click)="nextClientInfo()" type="button" class="btn btn-primary">Próximo</button>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col">
                <h3 class="mb-3">Sobre a mãe</h3>
                <div class="form-group">
                  <label>Nome completo</label>
                  <p class="mb-0">{{ client.family_data.mother.name | hyphensIfEmpty }}</p>
                </div>
                <div class="form-group">
                  <label>E-mail</label>
                  <p class="mb-0">{{ client.family_data.mother.email | hyphensIfEmpty }}</p>
                </div>
                <div class="form-group mb-0">
                  <label>Telefone</label>
                  <p class="mb-0">{{ client.family_data.mother.phone | hyphensIfEmpty }}</p>
                </div>
              </div>
              <div class="vr"></div>
              <div class="col">
                <h3 class="mb-3">Sobre o pai</h3>
                <div class="form-group">
                  <label>Nome completo</label>
                  <p class="mb-0">{{ client.family_data.father.name | hyphensIfEmpty }}</p>
                </div>
                <div class="form-group">
                  <label>E-mail</label>
                  <p class="mb-0">{{ client.family_data.father.email | hyphensIfEmpty }}</p>
                </div>
                <div class="form-group mb-0">
                  <label>Telefone</label>
                  <p class="mb-0">{{ client.family_data.father.phone | hyphensIfEmpty }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="clientInfoIndex === 3">
        <div class="d-flex">
          <div class="flex-grow-1">
            <h2>Dados acadêmicos</h2>
          </div>
          <div class="flex-grow-0">
            <button (click)="previousClientInfo()" type="button" class="btn btn-primary mr-2">Anterior</button>
            <button (click)="nextClientInfo()" type="button" class="btn btn-primary">Próximo</button>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col">
                <h3 class="mb-3">Ensino médio</h3>
                <div class="form-group">
                  <label>Nome da escola</label>
                  <p class="mb-0">{{ client.academic_data.high_school.school | hyphensIfEmpty }}</p>
                </div>
                <div class="row">
                  <div class="col form-group">
                    <label>Cidade</label>
                    <p class="mb-0">{{ client.academic_data.high_school.city | hyphensIfEmpty }}</p>
                  </div>
                  <div class="col form-group">
                    <label>Estado</label>
                    <p class="mb-0">{{ client.academic_data.high_school.state | hyphensIfEmpty }}</p>
                  </div>
                </div>
                <div class="form-group mb-0">
                  <label>Ano de conclusão</label>
                  <p class="mb-0">{{ client.academic_data.high_school.conclusion_year | hyphensIfEmpty }}</p>
                </div>
              </div>
              <div class="vr"></div>
              <div class="col">
                <h3 class="mb-3">Ensino superior</h3>
                <div class="form-group">
                  <label>Nome da instituição</label>
                  <p class="mb-0">{{ client.academic_data.higher_education.institution | hyphensIfEmpty }}</p>
                </div>
                <div class="row">
                  <div class="col form-group">
                    <label>Cidade</label>
                    <p class="mb-0">{{ client.academic_data.higher_education.city | hyphensIfEmpty }}</p>
                  </div>
                  <div class="col form-group">
                    <label>Estado</label>
                    <p class="mb-0">{{ client.academic_data.higher_education.state | hyphensIfEmpty }}</p>
                  </div>
                </div>
                <div class="form-group">
                  <label>Curso</label>
                  <p class="mb-0">{{ client.academic_data.higher_education.course | hyphensIfEmpty }}</p>
                </div>
                <div class="form-group mb-0">
                  <label>Ano de conclusão</label>
                  <p class="mb-0">{{ client.academic_data.higher_education.conclusion_year | hyphensIfEmpty }}</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="clientInfoIndex === 4">
        <div class="d-flex">
          <div class="flex-grow-1">
            <h2>Curso pretendido</h2>
          </div>
          <div class="flex-shrink-0">
            <button (click)="previousClientInfo()" type="button" class="btn btn-primary mr-2">Anterior</button>
            <button (click)="nextClientInfo()" type="button" class="btn btn-primary">Próximo</button>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <div class="row">
              <div class="col form-group">
                <label>Nome do curso</label>
                <p class="mb-0">{{ client.intended_course.name | hyphensIfEmpty }}</p>
              </div>
              <div class="col form-group">
                <label>Faculdade</label>
                <p class="mb-0">{{ client.intended_course.institution | hyphensIfEmpty }}</p>
              </div>
            </div>
            <div class="row">
              <div class="col form-group mb-0">
                <label>Turno preferido</label>
                <p class="mb-0">{{ client.intended_course.preferred_shift | hyphensIfEmpty }}</p>
              </div>
              <div class="col form-group mb-0">
                <label>Segunda opção de turno</label>
                <p class="mb-0">{{ client.intended_course.alternative_shift | hyphensIfEmpty }}</p>
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <ng-container *ngIf="clientInfoIndex === 5">
        <div class="d-flex">
          <div class="flex-grow-1">
            <h2>Informações adicionais</h2>
          </div>
          <div class="flex-grow-0">
            <button (click)="previousClientInfo()" type="button" class="btn btn-primary mr-2">Anterior</button>
            <button type="button" class="btn btn-primary" disabled>Próximo</button>
          </div>
        </div>
        <div class="card">
          <div class="card-body">
            <div class="form-group">
              <label>É portador de deficiência? Se sim, qual?</label>
              <p class="mb-0">{{ client.additional_information.disabilities | hyphensIfEmpty }}</p>
            </div>
            <div class="form-group">
              <label>Quando pretende chegar ao país?</label>
              <p class="mb-0">{{ (client.additional_information.arrival_date | date:"dd/MM/yyyy") || "" | hyphensIfEmpty }}</p>
            </div>
            <div class="form-group mb-0">
              <label>Como conheceu a empresa?</label>
              <p class="mb-0">{{ client.additional_information.how_did_you_know_the_company | hyphensIfEmpty }}</p>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
  </div>
  <div class="tasks">
    <div class="col-12">
      <h2>Atividades</h2>
      <ngx-masonry [options]="masonryOptions" class="row">
        <ngxMasonryItem *ngFor="let task of tasks; trackBy: trackByTask" class="col-6" style="margin-bottom: 20px">
          <div (click)="openTask(task)" class="task">
            <div class="card-body">
              <h5 class="flex-grow-1 mb-0">{{ task.name }}</h5>
              <div class="mt-3">
                <span class="badge badge-{{ taskStatus[task.status].colorSelector }}">{{ taskStatus[task.status].name }}</span>
                <span *ngIf="task.comments.length > 0" class="badge badge-secondary"><i class="far fa-comment"></i> {{ task.comments.length }}</span>
                <span *ngIf="task.attachments.length > 0" class="badge badge-secondary"><i class="fas fa-paperclip"></i> {{ task.attachments.length }}</span>
                <span *ngIf="task.schedule_date" class="badge badge-orange"><i class="far fa-clock"></i> {{ task.schedule_date | date:"MMM d, y" | titlecase }}</span>
              </div>
            </div>
          </div>
        </ngxMasonryItem>
      </ngx-masonry>
    </div>
  </div>
</div>