<div *ngIf="!loading" id="company-settings">
  <div class="row">
    <div class="col-12">
      <h1 class="mb-0">Configurações da empresa</h1>
    </div>
  </div>
  <div class="row mt-4 px-4">
    <div class="col-auto">
      <div class="form-group">
        <img [src]="company.logo_url" class="logo"/>
        <label class="btn btn-primary btn-block btn-file mt-3">
          Alterar logo
          <input
            (change)="updateCompanyLogo($event)"
            id="logo"
            name="logo"
            type="file"
            accept="image/*">
        </label>
      </div>
    </div>
    <div class="col px-4">
      <div class="row">
        <div class="col-6 form-group">
          <label for="name">
            <h5 class="mb-0">Nome</h5>
          </label>
          <input
            [(ngModel)]="company.name"
            id="name"
            name="name"
            type="text"
            class="form-control"
            minlength="3"
            required>
        </div>
      </div>
      <div class="form-group">
        <label>
          <h5 class="mb-0">Cor principal</h5>
        </label>
        <app-material-palette-picker
          [color]="company.primary_color"
          (colorSelected)="onColorSelected($event)">
        </app-material-palette-picker>
      </div>
      <div class="form-group">
        <label>
          <h5 class="mb-0">Cor do texto</h5>
        </label>
        <div class="palette">
          <span (click)="selectTextColor('#212529')" class="color bg-black text-white">
            <fa-icon *ngIf="selectedTextColor === '#212529'" [icon]="icons.check"></fa-icon>
          </span>
          <span (click)="selectTextColor('#ffffff')" class="color bg-white text-black">
            <fa-icon *ngIf="selectedTextColor === '#ffffff'" [icon]="icons.check"></fa-icon>
          </span>
        </div>
      </div>
      <button (click)="updateCompany()" type="button" class="btn btn-primary">
        Atualizar
      </button>
    </div>
  </div>
  <hr class="mt-5"/>
  <div class="row mt-3">
    <div class="col">
      <div class="row align-items-center">
        <div class="col">
          <h2 class="mb-0">Planos</h2>
        </div>
        <div class="col-auto">
          <button (click)="openSavePlan()" type="button" class="btn btn-primary">
            Cadastrar
          </button>
        </div>
      </div>
      <div *ngIf="plans.length === 0" class="jumbotron mt-3">
        <h3 class="text-center">Nenhum plano cadastrado</h3>
      </div>
      <div *ngIf="plans.length > 0" class="mt-3">
        <div class="row">
          <div *ngFor="let plan of plans; trackBy: trackByPlan" class="col-4">
            <div class="plan">
              <div class="card-body px-0 py-0">
                <h5 class="mb-0 px-3 py-2">{{ plan.name }}</h5>
                <h4 class="mb-0 px-3 py-4 bg-info text-center text-white">{{ plan.price | currency:company.currency }}</h4>
                <div class="actions">
                  <fa-icon [icon]="icons.pen" (click)="openSavePlan(plan)"></fa-icon>
                  <fa-icon [icon]="icons.trash" (click)="openDeletePlan(plan)" class="ml-2"></fa-icon>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>